<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: form_updates/update_tooltip.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: form_updates/update_tooltip.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var utils_main = require("../utils/utils_main.js");
var utils_forms = require("../utils/utils_forms");


/** when tooltip options are changed in the side area, these methods are called 
@namespace
*/
var update_tooltip = {

    /** gets a tooltip for scatter charts. Called from updateToolTip**/
    getScatterTooltip: function (chart, is_shared, decimals, signs_arr, multiplier, chart_type) {
        var new_tooltip = function () {

            var y_axis_title = this.series.yAxis.axisTitle ? this.series.yAxis.axisTitle.textStr : "Y-Axis";
            var x_axis_title = this.series.xAxis.axisTitle ? this.series.xAxis.axisTitle.textStr : "X-Axis";

            return "&lt;b>" + this.series.name + "&lt;/b>&lt;br>" + y_axis_title + ": &lt;b>" + signs_arr[0] +
                Highcharts.numberFormat((this.y * multiplier), decimals) + signs_arr[1] + "&lt;/b>&lt;br/>" +
                x_axis_title + ": &lt;b>" + signs_arr[0] + Highcharts.numberFormat((this.x * multiplier), decimals) + signs_arr[1] + "&lt;br/>";

        };

        return new_tooltip;
    },

    /** gets a tooltip for typical charts (line, area, bar etc). Called from updateToolTip**/
    getTypicalTooltip: function (chart, is_shared, decimals, signs_arr, multiplier, chart_type) {

        var new_tooltip;

        if (is_shared) { //SHARED TOOLTIP

            if (decimals > 0) { //use decimal formatter

                new_tooltip = function () {

                    var shared_tooltip_arr = [];
                    var point = this.point;

                    $.each(chart.series, function () {
                        shared_tooltip_arr.push("&lt;b>" + this.name + "&lt;/b> &lt;br>" + this.points[point.x].x + ": " + signs_arr[0] + Highcharts.numberFormat((this.points[point.x].y * multiplier), decimals) + signs_arr[1]);
                    });
                    return shared_tooltip_arr.join('&lt;br/>');
                }

            } else { //don't use decimal formatter

                new_tooltip = function () {

                    var shared_tooltip_arr = ["&lt;b>" + this.key + "&lt;/b>"];
                    var point = this.point;

                    $.each(chart.series, function () {
                        shared_tooltip_arr.push(this.name + ": " + signs_arr[0] + $(this.points[point.x].y * multiplier).addCommas() + signs_arr[1]);
                    });
                    return shared_tooltip_arr.join('&lt;br/>');
                }
            }


        } else { //NOT SHARED TOOLTIP

            if (decimals > 0) { //use decimal formatter
                new_tooltip = function () {
                    return "&lt;b>" + this.series.name + "&lt;/b>&lt;br>" + this.x + ": " + signs_arr[0] +
                        Highcharts.numberFormat((this.y * multiplier), decimals) + signs_arr[1];
                }
            } else { //don't use decimal formatter
                new_tooltip = function () {
                    return "&lt;b>" + this.series.name + "&lt;/b>&lt;br>" + this.x + ": " + signs_arr[0] +
                        $(this.y * multiplier).addCommas() + signs_arr[1];
                }
            }
        }

        return new_tooltip;
    },





    /** update tooltip - decide which kind of chart and call that get tooltip function **/
    updateToolTip: function (chart, all_chart_options) {

        var is_shared = utils_forms.getCheckBoxValue($("#chart_tooltip_shared_checkbox"));
        var decimals = Number($("#chart_tooltip_force_decimals_select").val());
        var signs = $("#chart_tooltip_signs_select").val();
        var multiplier = $("#chart_tooltip_y_multiple_select").val();
        var chart_type = all_chart_options.chart.type;
        var new_tooltip;
        var signs_arr = [signs === "$" ? "$" : "", signs === "%" ? "%" : ""];


        //IF A TYPICAL CHART
        if (["area", "line", "bar", "stacked_bar", "column", "stacked_column"].indexOf(chart_type) > -1) {
            new_tooltip = update_tooltip.getTypicalTooltip(chart, is_shared, decimals, signs_arr, multiplier, chart_type);
        }


        //IF A SCATTER CHART
        else if (chart_type === "scatter") {
            new_tooltip = update_tooltip.getScatterTooltip(chart, is_shared, decimals, signs_arr, multiplier, chart_type);

        }


        if (!chart) { //for use in tooltip_init
            return new_tooltip;
        }

        chart.tooltip.options.formatter = new_tooltip;
    //    chart.tooltip.refresh(chart.series[0].data[0]);

        all_chart_options.tooltip.formatter = utils_main.stringifyFormatter(new_tooltip, decimals, multiplier, signs_arr);
        
    }

}


module.exports = update_tooltip;


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-form_updates_all_form_updates.html">form_updates/all_form_updates</a></li><li><a href="module-form_updates_update_chart_type.html">form_updates/update_chart_type</a></li><li><a href="module-form_updates_update_colors.html">form_updates/update_colors</a></li><li><a href="module-form_updates_update_individual_series.html">form_updates/update_individual_series</a></li><li><a href="module-initializers_all_chart_options_init.html">initializers/all_chart_options_init</a></li><li><a href="module-initializers_chart_init.html">initializers/chart_init</a></li><li><a href="module-initializers_colors_init.html">initializers/colors_init</a></li><li><a href="module-initializers_credits_init.html">initializers/credits_init</a></li><li><a href="module-initializers_exporting_init.html">initializers/exporting_init</a></li><li><a href="module-initializers_legend_init.html">initializers/legend_init</a></li><li><a href="module-initializers_plot_options_init.html">initializers/plot_options_init</a></li><li><a href="module-initializers_series_init.html">initializers/series_init</a></li><li><a href="module-initializers_subtitle_init.html">initializers/subtitle_init</a></li><li><a href="module-initializers_title_init.html">initializers/title_init</a></li><li><a href="module-initializers_tooltip_init.html">initializers/tooltip_init</a></li><li><a href="module-initializers_x_axis_init.html">initializers/x_axis_init</a></li><li><a href="module-initializers_y_axis_init.html">initializers/y_axis_init</a></li><li><a href="module-parsers_parse_for_bubble.html">parsers/parse_for_bubble</a></li><li><a href="module-parsers_parse_for_scatter.html">parsers/parse_for_scatter</a></li><li><a href="module-parsers_parse_for_typical_chart.html">parsers/parse_for_typical_chart</a></li><li><a href="module-parsers_parse_table_input.html">parsers/parse_table_input</a></li><li><a href="module-utils_jq_extensions.html">utils/jq_extensions</a></li></ul><h3>Classes</h3><ul><li><a href="AllChartOptions.html">AllChartOptions</a></li><li><a href="ChartOptions.html">ChartOptions</a></li><li><a href="Credits.html">Credits</a></li><li><a href="Exporting.html">Exporting</a></li><li><a href="Legend.html">Legend</a></li><li><a href="PlotOptions.html">PlotOptions</a></li><li><a href="Series.html">Series</a></li><li><a href="Subtitle.html">Subtitle</a></li><li><a href="Title.html">Title</a></li><li><a href="Tooltip.html">Tooltip</a></li><li><a href="XAxis.html">XAxis</a></li><li><a href="yAxis.html">yAxis</a></li></ul><h3>Namespaces</h3><ul><li><a href="draw_chart.html">draw_chart</a></li><li><a href="keyboard_inputs.html">keyboard_inputs</a></li><li><a href="navigation_setup.html">navigation_setup</a></li><li><a href="update_credits.html">update_credits</a></li><li><a href="update_data.html">update_data</a></li><li><a href="update_legend.html">update_legend</a></li><li><a href="update_template.html">update_template</a></li><li><a href="update_tooltip.html">update_tooltip</a></li><li><a href="update_x_axis.html">update_x_axis</a></li><li><a href="update_y_axis.html">update_y_axis</a></li><li><a href="utils_forms.html">utils_forms</a></li><li><a href="utils_main.html">utils_main</a></li></ul><h3>Global</h3><ul><li><a href="global.html#parseForDrilldown">parseForDrilldown</a></li><li><a href="global.html#parseForMap">parseForMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sun Mar 13 2016 21:54:38 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
