<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/utils_main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/utils_main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>     var chart_recall = require("../chart_recall.js");
     /**
      * Main utility object, contains functions that get reused often
      * @namespace
      */
     var utils_main = {

         /** check value - if 0 or not a number, return undefined **/
         checkforUndefined: function (val) {
             return val === 0 || isNaN(val) ? undefined : val;
         },

         /** 
         turns objects into strings, including their methods 
         @returns {string} JSON
         */
         deepStringify: function deepStringify(obj) {
             return JSON.stringify(obj, function (key, value) {
                 if (typeof value === 'function') {
                     return value.toString();
                 } else {
                     return value;
                 }
             }).replace(/\\n/g, "");

         },

         /** 
         creates and returns a clearfloat class div
         @returns {element} div with "clearfloat" class
         */
         makeClearFloatDiv: function () {
             var clear_div = document.createElement("div");
             clear_div.className = "clearfloat";
             return clear_div;
         },

         parseBoolsFromArray: function (arr) {
             return arr.map(function (e) {
                 if (e === "true") {
                     return true;
                 } else if (e === "false") {
                     return false;
                 } else if (e === "null") {
                     return null;
                 } else {
                     return e;
                 }
             });
         },

         /** Converts an rgb string to an array of 3 values**/
         rgb2arr: function (rgb) {
             return rgb.replace(/[^0-9\,]+/g, '').split(",").map(function (item) {
                 return parseInt(item, 10);
             });
         },


         /** Displays an error message for a few seconds**/
         showError: function (string) {
             $(".alert-danger").text(string);
             setTimeout(function () {
                 $(".alert-danger").text("");
             }, 8000);

         },




         /** stringify tooltip / y-axis formatter function **/
         stringifyFormatter: function (tooltip, replacement_obj) {

             var tooltip_str = tooltip.toString();

             for (name in replacement_obj) {
                 var re = new RegExp(name, "g");

                 if (isNaN(Number(replacement_obj[name]))) { //replace strings with quotes
                     tooltip_str = tooltip_str.replace(re, '"' + replacement_obj[name] + '"');
                 } else {
                     tooltip_str = tooltip_str.replace(re, replacement_obj[name]); //replace numbers without quotes
                 }

                 if (replacement_obj.signs_arr) { //replace signs array (["$","%"]) with symbols 
                     tooltip_str = tooltip_str.replace(/signs_arr\[0\]/g, '"' + replacement_obj.signs_arr[0] + '"')
                         .replace(/signs_arr\[1\]/g, '"' + replacement_obj.signs_arr[1] + '"');
                 }

                 tooltip_str = tooltip_str.replace('+ ""', ""); //replace empty string
             }

             return tooltip_str;

         },



         /** calls code writing functions */
         writeCode: function writeCode(all_chart_options) {

             utils_main.writeHTMLCode(all_chart_options);
             utils_main.writeJSCode(all_chart_options);

         },

         writeHTMLCode: function (all_chart_options) {
             if (all_chart_options.chart.type !== "map") {
                 var width = $("#chart_width_textinput").val();
                 var height = $("#chart_height_textinput").val();
                 var id = all_chart_options.chart.renderTo;

                 var html_string = '&lt;div id="' + id + '" style = "width: ' + width + 'px; height: ' + height + 'px; margin: auto; padding: 0px;"> &lt;/div>';
             }


             $("#chart_html_code").text(html_string).each(function (i, block) {
                 hljs.highlightBlock(block); //init code coloring
             });


         },


         /** place code in chart_output_code and reinit highlight */
         writeJSCode: function (all_chart_options) {
             //save chart input values
             all_chart_options.saved_values = chart_recall.saveValues();

             var chart_options_js_string = utils_main.deepStringify(all_chart_options)
                 .replace(/headers=\\"rowHead\d+ columnHead\d+\\"/g, "") //trim down table alt output to make it smaller
                 .replace(/id=\\"(rowHead|columnHead)\d+\\"/g, "")
                 .replace(/\s{2,} /g, " ");



             chart_options_js_string = '$(document).ready(function(){\n\
             var all_chart_options = ' + chart_options_js_string + ';\n\
    var ' + all_chart_options.chart.renderTo + ' = new Highcharts.Chart({all_chart_options});\n\
});';

     $("#chart_output_code").text(chart_options_js_string).each(function (i, block) {
         hljs.highlightBlock(block); //init code coloring
     });
     }


     }


     module.exports = utils_main;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-form_updates_all_form_updates.html">form_updates/all_form_updates</a></li><li><a href="module-form_updates_update_chart_type.html">form_updates/update_chart_type</a></li><li><a href="module-form_updates_update_colors.html">form_updates/update_colors</a></li><li><a href="module-form_updates_update_individual_series.html">form_updates/update_individual_series</a></li><li><a href="module-initializers_all_chart_options_init.html">initializers/all_chart_options_init</a></li><li><a href="module-initializers_chart_init.html">initializers/chart_init</a></li><li><a href="module-initializers_colors_init.html">initializers/colors_init</a></li><li><a href="module-initializers_credits_init.html">initializers/credits_init</a></li><li><a href="module-initializers_exporting_init.html">initializers/exporting_init</a></li><li><a href="module-initializers_legend_init.html">initializers/legend_init</a></li><li><a href="module-initializers_plot_options_init.html">initializers/plot_options_init</a></li><li><a href="module-initializers_series_init.html">initializers/series_init</a></li><li><a href="module-initializers_subtitle_init.html">initializers/subtitle_init</a></li><li><a href="module-initializers_title_init.html">initializers/title_init</a></li><li><a href="module-initializers_tooltip_init.html">initializers/tooltip_init</a></li><li><a href="module-initializers_x_axis_init.html">initializers/x_axis_init</a></li><li><a href="module-initializers_y_axis_init.html">initializers/y_axis_init</a></li><li><a href="module-parsers_parse_for_bubble.html">parsers/parse_for_bubble</a></li><li><a href="module-parsers_parse_for_drilldown.html">parsers/parse_for_drilldown</a></li><li><a href="module-parsers_parse_for_scatter.html">parsers/parse_for_scatter</a></li><li><a href="module-parsers_parse_for_typical_chart.html">parsers/parse_for_typical_chart</a></li><li><a href="module-parsers_parse_table_input.html">parsers/parse_table_input</a></li><li><a href="module-utils_jq_extensions.html">utils/jq_extensions</a></li></ul><h3>Classes</h3><ul><li><a href="AllChartOptions.html">AllChartOptions</a></li><li><a href="ChartOptions.html">ChartOptions</a></li><li><a href="Colors.html">Colors</a></li><li><a href="Credits.html">Credits</a></li><li><a href="Exporting.html">Exporting</a></li><li><a href="Legend.html">Legend</a></li><li><a href="PlotOptions.html">PlotOptions</a></li><li><a href="Series.html">Series</a></li><li><a href="Subtitle.html">Subtitle</a></li><li><a href="Title.html">Title</a></li><li><a href="Tooltip.html">Tooltip</a></li><li><a href="XAxis.html">XAxis</a></li><li><a href="yAxis.html">yAxis</a></li></ul><h3>Namespaces</h3><ul><li><a href="calculate_recession_dates.html">calculate_recession_dates</a></li><li><a href="chart_recall.html">chart_recall</a></li><li><a href="draw_chart.html">draw_chart</a></li><li><a href="keyboard_inputs.html">keyboard_inputs</a></li><li><a href="navigation_setup.html">navigation_setup</a></li><li><a href="update_chart_options.html">update_chart_options</a></li><li><a href="update_credits.html">update_credits</a></li><li><a href="update_data.html">update_data</a></li><li><a href="update_legend.html">update_legend</a></li><li><a href="update_template.html">update_template</a></li><li><a href="update_tooltip.html">update_tooltip</a></li><li><a href="update_x_axis.html">update_x_axis</a></li><li><a href="update_y_axis.html">update_y_axis</a></li><li><a href="utils_forms.html">utils_forms</a></li><li><a href="utils_main.html">utils_main</a></li></ul><h3>Global</h3><ul><li><a href="global.html#parseForMap">parseForMap</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri Apr 01 2016 22:20:23 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
